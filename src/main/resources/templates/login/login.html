<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
    <!--<![endif]-->
    <head>
        <meta charset="utf-8" />
    	<title>天津国顺肉类食品有限公司</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />        
        <meta content="HYD Co.,Ltd" name="author" />

        <link href="/static/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /> 
        <link href="/static/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
        <link href="/static/assets/pages/css/login.min.css" rel="stylesheet" type="text/css" />

    	<link rel="shortcut icon" href="/static/assets/layouts/layout/img/favicon.ico" />

        <body class="login">
            <div class="content" id="login">
                <h3 class="form-title font-green">登&nbsp;&nbsp;&nbsp;&nbsp;录</h3>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">用户名称</label>
                    <input class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="off" placeholder="用户名称" v-model="username"/> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">用户密码</label>
                    <input class="form-control form-control-solid placeholder-no-fix" type="password" autocomplete="off" placeholder="用户密码" v-model="password"/> </div>
                <div class="form-actions">
                    <button type="submit" id="login-button" class="btn green uppercase"  v-on:click="login">登录</button>
                </div>
            </div>
            <div class="copyright">
        </body>    
        <script>
			document.write(new Date().getFullYear());
		</script> © HYD Co.,Ltd. Admin Dashboard Template. </div>
        <!--[if lt IE 9]>
		<script src="/assets/global/plugins/respond.min.js"></script>
		<script src="/assets/global/plugins/excanvas.min.js"></script>
		<script src="/assets/global/plugins/ie8.fix.min.js"></script>
		<![endif]-->
        <script src="/static/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/vue/vue.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/bootbox/bootbox.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/jquery-cookie/jquery.cookie.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/plugins/jquery-sha1/jquery.sha1.min.js" type="text/javascript"></script>
        <script src="/static/assets/global/scripts/app.min.js" type="text/javascript"></script>
        <script src="/static/assets/layouts/layout/scripts/custom-common.min.js" type="text/javascript"></script>      
        <script>
            new Vue({
              el: '#login',
              data: {
                username: '',
                password: ''
              },
              methods:{
                login:function(event){

                    if(stringIsNullOrEmpty(this.username)){
                        alert("请输入用户名");
                        return;
                    }

                    if(stringIsNullOrEmpty(this.password)){
                        alert("请输入密码");
                        return;
                    }


                    var dom = {
                        "blockDom": ".login",
                        "disabledDom":  "#login-button"
                    }

                    var data = {
                        "login_username": this.username,
                        "login_password": $.sha1(this.password)                        
                    }

                    ajaxToIndex(dom,configAPIUrl("api/v2/User"),"login",data,false,function(response){

                        //var response =  {"code":200,"msg":"ok","data":{"uuid":"a420e552-907f-442f-a4fd-b81b37c9baab","name":"系统管理员","headimg":"/static/assets/layouts/layout/img/avatar.png","token":"2f086c647dfb4e0da60ea974eb206a30"}};


                        $.removeCookie('USERUUID',{ path: '/'});
                        $.removeCookie('USERNAME',{ path: '/'});
                        $.removeCookie('HEADIMG',{ path: '/'});
                        $.removeCookie('TOKEN',{ path: '/'});
                        $.removeCookie('POSITIONUUID',{ path: '/'});
                        $.removeCookie('POSITIONTYPE',{ path: '/'});

                        $.cookie('USERUUID', response.data.uuid,{ path: '/'});
                        $.cookie('USERNAME', response.data.name,{ path: '/'});
                        $.cookie('HEADIMG', response.data.headimg,{ path: '/'});
                        $.cookie('TOKEN', response.data.token,{ path: '/'});
                        $.cookie('POSITIONUUID', response.data.positionUuid,{ path: '/'});
                        $.cookie('POSITIONTYPE', response.data.positionType,{ path: '/'});
                        console.log(response.data);
                        window.location.href = '/web/user/userInformation';

                    });
                }
              }
            })
        </script>
        <script type="text/javascript">
            $(document).ready(function()
            {
                $.backstretch([
                      "/static/assets/pages/media/bg/1.jpg",
                      "/static/assets/pages/media/bg/2.jpg",
                      "/static/assets/pages/media/bg/3.jpg",
                      "/static/assets/pages/media/bg/4.jpg"
                ], { duration: 3000, fade: 750 });
            })
        </script>
</html>